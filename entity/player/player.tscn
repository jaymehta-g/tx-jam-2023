[gd_scene load_steps=13 format=3 uid="uid://xtp5dguaero"]

[ext_resource type="Script" path="res://entity/player/player.gd" id="1_nxiq6"]
[ext_resource type="Resource" uid="uid://bln3t4wpg7v7" path="res://entity/player/player_stats.tres" id="2_mwk7j"]
[ext_resource type="Script" path="res://entity/player/states/state_machine.gd" id="2_owt2t"]
[ext_resource type="Script" path="res://entity/player/states/move.gd" id="3_7275l"]
[ext_resource type="Resource" uid="uid://b6xcapfnmy44k" path="res://entity/player/p2_input_maps.tres" id="3_rniwo"]
[ext_resource type="Script" path="res://entity/player/states/bounce.gd" id="4_fkyjq"]
[ext_resource type="Script" path="res://entity/player/states/dash.gd" id="8_362mj"]
[ext_resource type="Texture2D" uid="uid://bswqg5gsii6ha" path="res://entity/player/ratstudy.png" id="8_h7mt5"]
[ext_resource type="Script" path="res://entity/player/states/place_trap.gd" id="8_ighlf"]
[ext_resource type="Shape2D" uid="uid://buu4bqrlcsnim" path="res://entity/bouncer/bouncer_collision_shape.tres" id="9_wr4gg"]
[ext_resource type="Shape2D" uid="uid://dgrvqfedxlkwd" path="res://entity/trampoline/trampoline_body_collision_shape.tres" id="11_hdj0x"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_eoukd"]
size = Vector2(10, 20)

[node name="Player" type="CharacterBody2D"]
collision_mask = 2
script = ExtResource("1_nxiq6")
stats = ExtResource("2_mwk7j")
input_maps = ExtResource("3_rniwo")
dbg_color = Color(1, 1, 1, 1)

[node name="Sprite2D" type="Sprite2D" parent="."]
scale = Vector2(0.035, 0.035)
texture = ExtResource("8_h7mt5")
flip_h = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(-6.38186e-08, 4)
rotation = 1.5708
shape = SubResource("RectangleShape2D_eoukd")

[node name="State Machine" type="Node" parent="." node_paths=PackedStringArray("initial_state")]
script = ExtResource("2_owt2t")
initial_state = NodePath("Move")

[node name="Move" type="Node" parent="State Machine"]
script = ExtResource("3_7275l")

[node name="Dash Timer" type="Timer" parent="State Machine/Move"]
wait_time = 0.2
one_shot = true

[node name="Bounce" type="Node" parent="State Machine" node_paths=PackedStringArray("right_raycast", "left_raycast", "remote_transform")]
script = ExtResource("4_fkyjq")
right_raycast = NodePath("../../Wall Detectors/Right Cast")
left_raycast = NodePath("../../Wall Detectors/Left Cast")
remote_transform = NodePath("")

[node name="Dash" type="Node" parent="State Machine"]
script = ExtResource("8_362mj")

[node name="Place" type="Node" parent="State Machine" node_paths=PackedStringArray("trap_collision_container", "bouncer_shape_cast", "trampoline_shape", "propellor_location")]
script = ExtResource("8_ighlf")
trap_collision_container = NodePath("../../Trap Place Collision Checks")
bouncer_shape_cast = NodePath("../../Trap Place Collision Checks/Bouncer Placement")
trampoline_shape = NodePath("../../Trap Place Collision Checks/Trampoline Placement")
propellor_location = NodePath("../../Propellor Place Location")

[node name="Trap Place Collision Checks" type="Node2D" parent="."]

[node name="Bouncer Placement" type="Area2D" parent="Trap Place Collision Checks"]
position = Vector2(36.51, -7.52)
collision_layer = 0
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Trap Place Collision Checks/Bouncer Placement"]
shape = ExtResource("9_wr4gg")
debug_color = Color(0.701961, 0, 0, 0.0980392)

[node name="Trampoline Placement" type="Area2D" parent="Trap Place Collision Checks"]
position = Vector2(41.23, 4.64)
collision_layer = 0
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Trap Place Collision Checks/Trampoline Placement"]
shape = ExtResource("11_hdj0x")
debug_color = Color(0.701961, 0, 0, 0.0980392)

[node name="Wall Detectors" type="Node2D" parent="."]

[node name="Right Cast" type="RayCast2D" parent="Wall Detectors"]
position = Vector2(0, 3.98)
target_position = Vector2(11.24, 0)
collision_mask = 2

[node name="Left Cast" type="RayCast2D" parent="Wall Detectors"]
position = Vector2(0, 3.98)
target_position = Vector2(-11.24, 0)
collision_mask = 2

[node name="Propellor Place Location" type="Marker2D" parent="."]
position = Vector2(42, -2)
